<div class="container" *ngIf="isAuthenticated$ | async; else unauthorized">
  <!-- <div class="action-buttons">
    <button mat-button (click)="accordion.openAll()">Expand All</button>
    <button mat-button (click)="accordion.closeAll()">Collapse All</button>
  </div> -->

  <mat-tab-group #tabGroup dynamicHeight (selectedTabChange)="onSelectionChanged($event)">
    <mat-tab label="Hosting" >
      <mat-accordion>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title>hosting tenant admin </mat-panel-title>
            <mat-panel-description>
              tenant administration portal
            </mat-panel-description>
          </mat-expansion-panel-header>

          <p-dataView
            #dv
            [paginator]="true"
            [rows]="5"
            layout="grid"
            [lazy]="true"
            (onLazyLoad)="pullHostingEntitiesTenantsByOffset($event)"
            [totalRecords]="tenantChooserService.hostingEntitiesTenantsCount"
            [value]="hostingModelTenant$ | async"
          >
            <ng-template pTemplate="header">
              <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
            </ng-template>

            <ng-template let-tenant pTemplate="listItem">
              {{ tenant.DisplayName }}
            </ng-template>

            <ng-template let-tenant pTemplate="gridItem">
              <div class="container">
                <p-card>
                  <div class="row">
                    <div class="col">
                      {{ tenant.DisplayName }}
                    </div>
                    <div class="col">
                      {{ tenant.TenantIdentifier }}
                    </div>
                    <div class="col">
                      {{ tenant.BaseUrl }}
                    </div>
                  </div>
                  <br />
                  <div *ngIf="tenant.AccessControlEntries">
                    <div>access control list</div>
                    <lib-hostingAccessControlEntry-table
                      [accessControlEntries]="tenant.AccessControlEntries"
                    ></lib-hostingAccessControlEntry-table>
                  </div>
                  <br />

                  <div *ngIf="tenant.Owners">
                    <div>owners</div>
                    <lib-hostingPrincipal-table [principals]="tenant.Owners">
                    </lib-hostingPrincipal-table>
                  </div>
                </p-card>
              </div>
            </ng-template>

            <ng-template pTemplate="footer">
              <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
            </ng-template>
          </p-dataView>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-tab>

    <mat-tab label="Content">
      <mat-accordion>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> content tenant admin </mat-panel-title>
            <mat-panel-description>
              tenant administration portal
            </mat-panel-description>
          </mat-expansion-panel-header>

          <p-dataView
            #dvContent
            [paginator]="true"
            [rows]="5"
            layout="grid"
            [lazy]="true"
            (onLazyLoad)="pullContentEntitiesTenantsByOffset($event)"
            [totalRecords]="tenantChooserService.contentEntitiesTenantsCount"
            [value]="contentModelTenant$ | async"
          >
            <ng-template pTemplate="header">
              <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
            </ng-template>

            <ng-template let-tenant pTemplate="listItem">
              {{ tenant.DisplayName }}
            </ng-template>

            <ng-template let-tenant pTemplate="gridItem">
              <div class="container">
                <p-card>
                  <div class="row">
                    <div>
                      {{ tenant.DisplayName }}
                    </div>
                    <div>
                      {{ tenant.TenantIdentifier }}
                    </div>
                    <div>
                      {{ tenant.BaseUrl }}
                    </div>
                  </div>
                  <br />
                  <div>access control list</div>
                  <lib-contentAccessControlEntry-table
                    [accessControlEntries]="tenant.AccessControlEntries"
                  ></lib-contentAccessControlEntry-table>
                  <br />
                  <div>principals</div>
                  <lib-contentPrincipal-table [principals]="tenant.Owners">
                  </lib-contentPrincipal-table>
                </p-card>
              </div>
            </ng-template>

            <ng-template pTemplate="footer">
              <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
            </ng-template>
          </p-dataView>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-tab>
  </mat-tab-group>
</div>

<ng-template #unauthorized>
  <div>
    <span>unauthorized</span>
  </div>
</ng-template>
